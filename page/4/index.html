<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="专注Android，Java，React Native，Python">
<meta property="og:type" content="website">
<meta property="og:title" content="一路追梦想">
<meta property="og:url" content="http://picksomething.cn/page/4/index.html">
<meta property="og:site_name" content="一路追梦想">
<meta property="og:description" content="专注Android，Java，React Native，Python">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一路追梦想">
<meta name="twitter:description" content="专注Android，Java，React Native，Python">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://picksomething.cn/page/4/"/>





  <title>一路追梦想</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一路追梦想</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">热爱技术，更热爱生活</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2015/01/18/浅谈Android管理task方式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/01/18/浅谈Android管理task方式/" itemprop="url">浅谈Android管理task方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-18T02:03:43+08:00">
                2015-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前在研究Android 四种LaunchMode的时候，有看到关于taskAffinity的内容，当时没有细看，现在突然发现同事提交代码的时候有写关于修改taskAffinity的东西，于是就有抽时间详细的研究了一下taskAffinity这个属性，发现还蛮复杂的，把自己的一些实践和见解写下来，供以后查看，涉及到的内容较多，可以重点查看红色的字体。</p>
<p>学习Android最好的教材就是Google官方文档加代码实践，在开始说taskAffinity属性之前，我们可以先看一下官网对于Task的定义：</p>
<pre><code>A task is a collection of activities that users interact with when 
performing a certain job. The activities are arranged in a stack 
(the back stack), in the order in which each activity is opened.`&lt;/pre&gt;
简单来说:**task就是一组特定的activities集合，这些activities按照每一个被打开的顺序放到一个stack中。**
&lt;!--more--&gt;
当用户打开一个application的时候，该application的task来到前台，如果没有该application的task存在(application最近没有被打开过)，一个新的task将会被创建同时应用程序的主activity作为根activity在stack中打开。
当当前的activity启动另一个activity的时候，新的activity被推到栈顶并获得焦点，之前的activity仍然在stack中，但是被stop了。当一个activity stop了，系统保留其UI的当前状态。当用户按返回键，当前的activity从栈顶被弹出(被destroy了)，之前的activity 恢复(resume)。栈中的activities重不会重新被排序，只有进栈和出栈。这样一来，返回stack以一种先进后出的对象结构进行操作。下图通过一个时间轴展现在不同的时间点属于当前返回stack的activities之间的进度来可视化这个行为。
[![diagram_backstack](http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_backstack.png)](http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_backstack.png)

如果用户继续点击返回键，直到所有的activities从栈中被移除，task将不再存在。
一个task是一个有机的整体，当用户开始了一个新的task或者通过Home键来到Home screen，可以被移到后台。在后台，所有task中的activities被stop了，但是这个task的返回stack仍然保持不变-改task只是简单地丢失了焦点，被另一个stack取代，如下图所示：
[![diagram_multitasking](http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_multitasking.png)](http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_multitasking.png)

一个task可以返回到前台这样用户就可以在他们离开的地方重新拿起。假设，例如，当前的task(Task A)有三个activities在它的栈中-两个在当前的activity下面。用户按下Home键，然后启动另一个新的应用程序。当回到Home screen的时候，Task A进入到了后台，当新的应用程序启动的时候，系统启动了该应用程序的带有它自己activities栈的task(Task B)。在和新的应用程序交互后，用户在此返回到Home并且选择最初启动的Task A的应用程序。现在，Task A重新来到前台-所有的三个在它在栈中的activities都完好无损并且栈顶的activity恢复了。这个时候，用户可以切换回Task B通过回到Home并选择对应task的应用程序。这就是Android的多任务的例子。

因为返回栈中的activities从来都不会被重新排序，如果你的应用程序允许用户启动一个特定的来自不止一个activity的activity。该activity的一个新的实例被创建并被push盗栈上(而不是将任何改activity之前的实例带到栈顶)。这样一来，你的应用程序中的一个activity可能会被初始化多次(甚至来自不同的tasks),如下图所示：
[![diagram_multiple_instances](http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_multiple_instances.png)](http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_multiple_instances.png)

这样一来，如果用户点击返回键，该activity的每一个实例按照它们被打开的顺序显露出来。然而，你可以修改这种行为如果你不想一个activity被实例化多次。

简单总结如下：
</code></pre><ol>
<li>当Activity A启动 Activity B，Activity A is stopped，但是系统仍然保留其状态(比如滚动轴位置和表单中的文字啊)。如果用户在Activity B点击返回键，Activity A从它存储的状态中恢复。</li>
<li>当用户通过点击Home键离开一个任务，当前的Activity停止了，它的task转到后台。系统保留task中每一个activity的状态。如果用户稍后选择开始该task的应用图标来恢复该task，该task就会来到前台并恢复栈顶的activity。</li>
<li>如果用户点击返回键，当前的activity被从栈中弹出并被destroy。栈中之前的activity被恢复，当一个activity被destroy，系统将不会保留改activity的状态。</li>
<li><p>Activities可以被实例化多次，即使来自其它tasks。<br>下面我们看看官网关于管理Task的内容，这个就是LaunchMode和taskAffinity密切相关了。</p>
<p>Android管理任务的方式和<code>back stack</code>，如上面描述的一样-通过”先进后出”放置所有在同一个task中陆续打开的activities-对于大部分应用程序都工作的很好，你不必担心你的activities如何与task关联或者他们如何存在于back stack中。然而，你可能决定你想打断正常的方式。或许你想你应用程序中的一个activity开始一个新的task当它启动的时候(而不是被放置在当前task中)；或者，当你启动一个activity，你想讲它的一个存在的实例带到前台(而不是在back stack的栈顶重新创建一个它的实例)；或者，你想当用户离开task的时候，你的back stack中所有的activities被清除除了根activity。</p>
<p>你可以做这些事情或者更多，使用activity manifest元素中的属性和intent标志你传给<code>startActivity()</code>方法的。<br>下面我将使用到的主要activity属性如下：<code>taskAffinity launchMode</code>和一些主要的intent标志：<br><pre><code>FLAG_ACTIVITY_NEW_TASK
FLAG_ACTIVITY_CLEAR_TOP
FLAG_ACTIVITY_SINGLE_TOP</code></pre><br>根据Google Android官方文档的建议：</p>
</li>
<li><p>定义启动模式：</p>
<p>启动模式允许你定义一个activity的实例如何与当前的task关联，有两种方法来定义不同的启动模式：<br>使用manifest配置文件<br>当你在你的manifest文件中声明一个activity时，你可以指明activity如何和tasks关联当它启动的时候。2.  使用intent标志<br><strong>使用manifest配置文件：</strong><br>launchMode属性指明activity如何被启动到task的指令，有四种不同的启动模式你可以赋值给launchMode属性：<br><code>standard&quot;(默认模式)</code></p>
<p><code>singleTop</code></p>
<p><code>singleTask</code></p>
<p><code>singleInstance</code></p>
<p>再看一个例子：Android浏览器应用声明web browser activity应当总是在它自己的task中打开-通过在&lt;activity&gt;元素中指定singleTask启动模式。<br><strong>这意味着如果你的应用程序发送一个intent请求打开Android Browser，Android Browser的Activity不会放到和你的应用同一个task中。相反，要么一个针对Browser的新的task启动，或者如果早已经有了一个Browser的task在后台运行，该task将会转到前台处理新的intent。</strong><br>无论一个activity是在一个新的task中启动，还是和启动它的activity处于同一个task，返回键总是可以带用户回到之前的activity。<br>然而，如果你启动activity的时候指定singleTask启动模式，接着如果该activity的一个实例存在于一个后台task中，那整个task会被带到前台，这个时候，回退栈(back stack)栈顶现在包括带到前台的task中的所有activities。<br>如下图所示：<br><a href="http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_backstack_singletask_multiactivity.png" target="_blank" rel="noopener"><img src="http://www.picksomething.cn/wp-content/uploads/2015/01/diagram_backstack_singletask_multiactivity.png" alt="diagram_backstack_singletask_multiactivity"></a></p>
<p><strong>使用Intent标志：</strong><br>当启动一个activity时，你可以修改一个activity和它的task的关联性通过在你用startActivity()方法传递的intent中包含标志，你可以包含的标志有：<br><pre><code>FLAG_ACTIVITY_NEW_TASK</code></pre><br>启动指定activity到一个新的task中，如果一个关联你现在正在启动的activity的task，该task将会以它最后存储的状态被带到前台并且改activity在它的onNewIntent()方法中接收新的intent。相同与上面的singleTask。<br><pre><code>FLAG_ACTIVITY_SINGLE_TOP</code></pre><br>如果正在启动的activity是当前activity(在back stack栈顶)，那么存在的实例将会在收到一个onNewIntent()的调用，而不是新创建一个该activity实例，相同与上面的singleTop。<br><pre>`FLAG_ACTIVITY_CLEAR_TOP</pre></p>
</li>
</ol>
<p>如果正在启动的activity早已经运行在当前的task中，此时不会重新启动一个该activity的实例，而是所有在该activity上面其他的activities会被destroy，并且intent通过onNewIntent（）方法会被发送到恢复的activity实例(现在栈顶的activity)。<br><code>FLAG_ACTIVITY_CLEAR_TOP</code>是配合<code>FLAG_ACTIVITY_NEW_TASK</code>最长使用的。当一起使用的时候，这个标志是定位在另一个task中已存在的activity并把它放到可以响应intent的位置的一种方法。<br><strong>注意：如果特定的activity的启动模式是standard，它也会被从栈顶移除并且一个新的实例在它的位置被启动来处理进来的intent，因为当启动模式是standard时，一个针对新的new intent的新的实例总会被创建。</strong><br><strong>处理affinities</strong><br>affinity属性指明一个activity更喜欢属于哪个task。默认地，来自一个应用程序的所有activities彼此都有一个亲和性。所以，一般来说一个相同应用的所有activities倾向于在一个相同的task中。然而，你可以修改一个activity的默认affinity属性。定义在不同应用程序的activities可以共享一个affinity属性，或者定义在同一个应用程序的activities可以被赋予不同的task亲和性。<br>你可以通过&lt;activity&gt;元素的taskAffinity来修改任何给定的activities的亲和性。</p>
<p>taskAffinity属性带有一个字符串值，该值必须和声明在manifest中的默认包名一样唯一，因为系统使用这个名字来识别应用程序的默认task亲和性。</p>
<p>亲和性使用在两种情况下：<br>当一个包含FLAG_ACTIVITY_NEW_TASK标志的intent启动一个activity时。</p>
<p>当一个activity它的allowTaskReparenting属性设置为true</p>
<p>继续看官网对于taskAffinity属性的定义(水平有限，翻译的不是很好)：</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2015/01/01/DrawerLayout导航抽屉的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/01/01/DrawerLayout导航抽屉的使用/" itemprop="url">DrawerLayout导航抽屉的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-01T15:41:28+08:00">
                2015-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>现在很多移动APP都支持那种左划或者右划调出抽屉选项的操作，目前第三方库比较知名的是配合<code>ActionBarShelock</code>(<a href="https://github.com/JakeWharton/ActionBarSherlock" target="_blank" rel="noopener">Github地址</a>,<a href="http://actionbarsherlock.com/" target="_blank" rel="noopener">官网地址</a>)使用的<code>SlidingMenu</code>(<a href="https://github.com/jfeinstein10/SlidingMenu" target="_blank" rel="noopener">Github地址</a>),这个开源库很强大,也有很多APP都在使用,经过测试和验证过的，大家都可以放心使用.</p>
<p>今天要说的是google官方出的DrawerLayout控件的使用，先看两张效果图：<br><a href="http://www.picksomething.cn/wp-content/uploads/2015/01/demo.png" target="_blank" rel="noopener"><img src="http://www.picksomething.cn/wp-content/uploads/2015/01/demo.png" alt=""></a></p>
<p>根据Google官方文档可以知道，使用DrawerLayout控件一般需要5大步：</p>
<ol>
<li><p>创建一个DrawerLayout布局<br>这个比较简单，要求DrawerLayout为根布局，第一个子布局代表没有打开抽屉时候的主视图(这个视图的宽度必须为match_parent)，第二个子布局就代表抽屉布局了，一般抽屉中放入的都是一些设置选项，以ListView为常见布局.代码如下：</p>
<p>&lt;android.support.v4.widget.DrawerLayout</p>
<pre><code>xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:id=&quot;@+id/drawer_layout&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot;&amp;gt;
&amp;lt;!-- 主视图布局，必须是DrawerLayout的第一个子布局，且宽度要充满父级容器 --&amp;gt;
</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2015/01/01/DrawerLayout导航抽屉的使用/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/30/Android Studio ADB not responding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/30/Android Studio ADB not responding/" itemprop="url">Android Studio ADB not responding...</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-30T01:15:41+08:00">
                2014-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>今天想把一个Android Eclipse项目导出到Android Studio中之后,就Google了一下教程,整个导出过程也挺顺利,但是后面还是遇到了一个棘手的问题,我调试用的虚拟机是Genymotion,之前eclipse 和studio都是公用这一个Genymotion虚拟机调试,但是这次在运行从Eclipse导出到Studio的项目的时候,一直提示:</p>
<pre><code>ADB not responding. If you&apos;d like to retry
then please manually kill &quot;adb&quot; and click &apos;Restart&apos;
`&lt;/pre&gt;
刚开始我以为是刚导出的原因,是不是之前Eclipse的adb连着这个Genymotion虚拟机,导致出现这样的错误,于是我就开始尝试:
</code></pre><ol>
<li>关闭Genymotion虚拟机,重新在Studio中通过Genymotion的插件启动Genymotion虚拟机,结果是:Not work</li>
<li>重启电脑,依然Not work<br>我试着Google了一下,发现好像蛮多人遇到这个问题,但是要么就是别人在Stack Overflow提问没人回答,要么就是有人给出答案,无非就是说因为电脑里面有两个sdk目录(一个eclipse的sdk,一个studio的sdk),需要重启一下adb服务,也就是执行下面这两行代码:<br><pre><code>adb kill-server
adb start-server</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/12/30/Android Studio ADB not responding/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/29/2014年总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/29/2014年总结/" itemprop="url">2014年总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-29T00:47:15+08:00">
                2014-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Twitter/" itemprop="url" rel="index">
                    <span itemprop="name">Twitter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>2014年就要过完了，是时候好好写个总结了，趁着最近这几天休假，好好梳理一下，在2014年底把总结写一下。</p>
<ul>
<li><p>工作<br>优点:今年六月在入司一年之后顺利转正,也如愿拿到优秀校招生.整体来说这一年工作上提升了很多,待人接物等都有长足进步.技术上对于Android系统层面和Linux脚本这两大方面的提升比较明显一些,毕竟工作接触技术方面太多,Android系统开发啊,Android应用开发,C++,Makefile等技术都有接触,但是工作主要还是偏向Android系统开发,所以Android系统层面上的东西了解的更多一些.<br>不足:因为工作职位的原因,对于Android应用的开发做的并不是很多,上半年没有转正的时候还会做一些Android应用项目,但是下半年新的一批校招大学生进入公司之后,Android应用开发就交给他们了,我就主要负责Android系统这一块了,其实自己内心里面还是更喜欢Android应用开发多一些,所以只能在平时没事的时候自己学习,编写一些Android应用的Demo来防止自己对于Android应用生疏了.</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/12/29/2014年总结/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/23/echo命令在bash和dash上的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/23/echo命令在bash和dash上的区别/" itemprop="url">echo命令在bash和dash上的区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-23T23:01:38+08:00">
                2014-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天自己在新服务器上编译的时候突然发现无法生成备份包了，同样的源代码在之前用的服务器上编译就很正常的可以生成备份包，于是觉得很好奇，为什么会这样呢？<br>根据错误信息提示发现，由于生成的一个ini配置文件每一行的前面出现了无法识别的-e，打开配置文件一看还真的是每行前面都多出来了一个-e，还以为是之前新服务器没有配置好造成的，把编译生成的ini文件删除之后，重新编译一遍发现新生成的ini文件一样还是每行前面都有一个-e，我就很纳闷了，然后我就看了一下MakeFile中生成这个配置文件的这一段代码，基本都是这样的</p>
<pre><code>output_config_file: BUILD_CFG:=${SAVE_FOLDER}/cfg_build.ini
output_config_file:
        @echo -e &quot;[CFG_BUILD]&quot; &amp;gt; ${BUILD_CFG}
        @echo -e &quot;BOARD = $(BOARD_ID)&quot; &amp;gt;&amp;gt; ${BUILD_CFG}
`&lt;/pre&gt;
上面这段代码的内容很简单啊，无非就是在生成的cfg_build.ini中输出一些需要的内容，为什么会在cfg_build.ini的每行前面多处一个-e，实在搞不明白之后就找负责服务器的同事问了一下，他说也不太清楚要问一下这个Makefile脚本的作者，于是又找到了Makefile脚本的作者，他告诉了我一句bash和dash的区别，自己也不太清楚，就Google了一下，慢慢地就搞清楚了，然后惊叹：哦，原来是这样的。
&lt;!--more--&gt;
这个是因为Ubuntu在从6.10开始，就将先前默认的`bash shell`更换成了`dash shell`，据说是因为`bash`更小巧，运行更快，还与POSIX标准相兼容，也就是将`/bin/sh`链接到了`/bin/dash`而不是`/bin/bash`。我们可以验证一下是不是这样的，首先在打开一个Ubuntu的Terminal，我们输入如下命令：
&lt;pre&gt;`ls -l /bin/sh`&lt;/pre&gt;
我们可以看到输出是这样的
&lt;pre&gt;`/bin/sh -&amp;gt; dash`&lt;/pre&gt;
这就证实了`Ubuntu`确是将`dash`作为默认的`/bin/sh`，这样一来什么都搞清楚了，因为`dash shell`中标准的echo不支持转义参数-e，也就是说-e是`bash shell`上`echo`带的一个可选参数，既然这样，那么解决办法就是将`Ubuntu`默认的`/bin/sh`改为`bash shell`只需要下面这样一条命令就可以了：
&lt;pre&gt;`sudo dpkg-reconfigure dash`&lt;/pre&gt;
然后在弹出的选项中选择否(No)，就搞定了，此时再次执行ls -l /bin/sh命令就发现已经指向/bin/bash了，重新编译代码，发现此时生成的`build_cfg.ini`文件中每行前面已经没有-e了，问题顺利解决了。

**补充一**：@echo是关闭命令在屏幕上回显的意思
我们知道shell脚本会依次执行脚本中的的每条命令，并且会在显示器上显示，如果你不想让它们显示，可以加一个“echo off”，当然，“echo off”也是命令，它本身也会显示，如果连这条也不显示，就在前面加个“@”。

**补充二**：echo 命令基本的功能是输出，通过选项和参数组合，是能够产生很多功能的，这里举两个例子
例子1.
&lt;pre&gt;`echo -e &quot;\n Project1: \n\n\tplan \n\twrite \n\ttest\n&quot; &amp;gt; project1`&lt;/pre&gt;
&lt;div id=&quot;crayon-549999236c74e297491827&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-mouseover&quot;&gt;&lt;/div&gt;
输出格式化内容到project1中
例子2.
&lt;pre&gt;`echo -e The gif files are *.gif
</code></pre><p><div id="crayon-549999236c756037362532" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"></div><br>输出当前目录下所有名字以.gif后缀的图片文件</p>
<p><strong>补充三</strong>：附上dash和bash的简单介绍<br>bash shell是几乎所有Linux发行版的默认shell。作为标准Unix shell——Bourne shell（沿用创建者的名字）的替代，bash shell由GNU工程开发。bash shell的名称就是针对这个Bourne shell的文字游戏，全称为“Bourne again shell”。 bash有很灵活和强大的编程接口，同时又有很友好的用户界面。功能包括命令补齐、通配符、命令历史记录、别名等。<br>dash shell是作为Debian Linux发行版的一部分开发的，主要出现在Ubuntu Linux发行版中。它是Bourne shell的精简版，支持的功能不像bash shell支持的那样多，这可能会给脚本编程带来一些问题。<br>dash shell的历史很有趣，它是ash shell的直系后代，而ash shell是Unix系统上原来的Bourne shell的简化版本。令人不解的是，实际上dash shell在许多基于Debian的Linux发行版中并不是默认的shell。由于bash shell在Linux中的流行，大多数基于Debian的Linux发行版将bash shell用作普通登录shell，只将dash shell用作安装脚本的快速启动shell来安装发行版文件。而流行的Ubuntu发行版是一个例外。Ubuntu Linux发行版将bash shell用作默认的交互shell，但将dash shell用作默认的/bin/sh shell。这通常会让shell脚本程序员很困惑，并给在Linux环境中运行shell脚本带来了很多问题。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/14/OpenSuSE13.2添加Android Studio到应用程序列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/14/OpenSuSE13.2添加Android Studio到应用程序列表/" itemprop="url">OpenSuSE13.2添加Android Studio到应用程序列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-14T22:42:25+08:00">
                2014-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>现在<code>Android Studio 1.0</code>版本正式发布以后，感觉体验比以前好了很多，所以也可以正式抛弃Eclipse，彻底改用Android Studio了。<br>Linux下安装Android Studio很简单，就是到官网下载安装包，然后解压就可以了，然后到对应的Android Studio解压目录找到bin文件夹下面的studio.sh脚本，在终端中执行<code>./studio.sh</code>就可以启动了(前提是安装并配置好了JDK环境)<br>但是每次都在终端下到指定目录运行脚本启动也挺麻烦的，所以就要加入到应用程序列表中，可以直接搜索或者添加OpenSuSE左边的收藏栏中，如何将Android Studio添加到应用程序列表呢，很简单：</p>
<ol>
<li><p>到/usr/share/applications/目录下面</p>
</li>
<li><p>执行vim studio.desktop命令</p>
</li>
<li><p>加入如下代码</p>
<p>[Desktop Entry]<br>Categories=Application;Development<br>Name=Studio<br>Exec=/home/caobin/android-studio/bin/studio.sh<br>Icon=/home/caobin/android-studio/bin/idea.png<br>Terminal=false<br>Encoding=UTF-8<br>Comment=Android Studio<br>上面代码中Exec和Icon代表执行文件路径和图标路径，具体替换为自己实际的路径即可</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/12/14/OpenSuSE13.2添加Android Studio到应用程序列表/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/11/29/又大了一岁/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/29/又大了一岁/" itemprop="url">又大了一岁</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-29T23:16:02+08:00">
                2014-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Twitter/" itemprop="url" rel="index">
                    <span itemprop="name">Twitter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div><br>&gt; 今年因为闰九月的缘故，自己的23岁生日好像晚来了一些，哈哈。今天生日,女朋友给送了一个机械键盘,感觉就是不一样,感谢.<br>&gt;<br>&gt;<br>&gt; 话说转眼都23周岁了,工作一年多了,很热爱编程这份工作,明年是关键的一年,加油.<br></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/11/02/Android4.0以上版本自定义Titlebar遇到的坑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/02/Android4.0以上版本自定义Titlebar遇到的坑/" itemprop="url">Android4.0以上版本自定义Titlebar遇到的坑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-02T22:34:34+08:00">
                2014-11-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>虽然Android原生的控件是越来越完善和强大，但是很多时候还是需要我们自定义一些控件来让我们开发的app看起来很好看，让人舒服。比如<code>android4.0</code>以上默认的edittext我就觉得不好看，没有边角，还是喜欢那种四周有边角的看起来让人舒服，当然这个不同主题下显示效果是不一样的。题外话就扯到这里吧，现在进入正题：</p>
<p><code>Titlebar</code>就是activity最上面显示app name的那个东东，今天在coding的时候遇到一个需要自定义titlebar的，当然这个很简单了，就是自己根据需要写一个布局然后替换掉默认的titlebar就可以了，替换代码baidu一下有很多，简单的说就是在activity的onCreate方法中加入下面两句：</p>
<p>1.告诉activity我要使用自己定义的titlebar，不用你默认的</p>
<pre><code>requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
`&lt;/pre&gt;
2.让activity加载自己定义的titlebar的布局
&lt;pre&gt;`getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);`&lt;/pre&gt;
然后在`manifest`中自定义titlebar的那个activity中加入自定义的theme，贴上我自定义theme的代码，我使用的是4.4的版本
&lt;pre&gt;`&amp;lt;style name=&quot;HomePage&quot; parent=&quot;AppTheme&quot;&amp;gt;
    &amp;lt;item name=&quot;android:windowTitleSize&quot;&amp;gt;60dp&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;android:windowTitleBackgroundStyle&quot;&amp;gt;@style/WindowTitleBackground&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;
&amp;lt;style name=&quot;WindowTitleBackground&quot;&amp;gt;
    &amp;lt;item name=&quot;android:background&quot;&amp;gt;@color/blue&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;
`&lt;/pre&gt;
这个时候第一个坑出现了
&lt;!--more--&gt;
**坑一：**报如下错误：
&lt;pre&gt;`android.util.AndroidRuntimeException: 
You cannot combine custom titles with other title features
`&lt;/pre&gt;
原因是说android4.0以上使用actionbar替代titlebar了，所以调用
&lt;pre&gt;`requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);`&lt;/pre&gt;
** 网上解决办法：**使用android自带的主题就OK了，也就是将`parent=“AppTheme”`
换成`parent=“android:Theme”`,自己试了一下发现确实不报错了，可以正常运行了，但是问题来了：整个app背景都变成黑色的了，这根本不是我想要的颜色啊。。。于是查看`android:Theme`的源码(一部分)发现是这样写的：
&lt;pre&gt;`&amp;lt;style name=&quot;Theme&quot;&amp;gt;
    &amp;lt;item name=&quot;colorForeground&quot;&amp;gt;@android:color/bright_foreground_dark&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;colorForegroundInverse&quot;&amp;gt;@android:color/bright_foreground_dark_inverse&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;colorBackground&quot;&amp;gt;@android:color/background_dark&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;colorBackgroundCacheHint&quot;&amp;gt;?android:attr/colorBackground&amp;lt;/item&amp;gt;
    ....
&amp;lt;/style&amp;gt;
`&lt;/pre&gt;
看到colorBackground那句了吗，明白为什么黑了吧。

**最终解决办法：**但是我不想要黑的啊，那就继续想办法解决呗，最终在一国外网址上看到一个老外也遇到这个问题了，他给的解决方法是在自定义的主题中加入这样一句代码：
&lt;pre&gt;`&amp;lt;item name=&quot;android:windowActionBar&quot;&amp;gt;false&amp;lt;/item&amp;gt;`&lt;/pre&gt;
那么更改过后的自定义主题就变成这样的了
&lt;pre&gt;`&amp;lt;style name=&quot;HomePage&quot; parent=&quot;AppTheme&quot;&amp;gt;
    &amp;lt;item name=&quot;android:windowTitleSize&quot;&amp;gt;60dp&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;android:windowTitleBackgroundStyle&quot;&amp;gt;@style/WindowTitleBackground&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;android:windowActionBar&quot;&amp;gt;false&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;
&amp;lt;style name=&quot;WindowTitleBackground&quot;&amp;gt;
    &amp;lt;item name=&quot;android:background&quot;&amp;gt;@color/blue&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;
`&lt;/pre&gt;
这样这个问题就顺利解决了，这句话的用处就是`disable actionbar`。

**坑二：**启动activity时默认的titlebar会瞬间闪一下

第一个坑填平之后就开始遇到第二个坑了，为什么我每次启动这个自定义title的activity时候，都会闪一下默认的titlebar才加载自定义的titlebar呢，我不是自己定义了吗？为毛默认的还要闪一下，刷存在感吗。。。

**原因：**首先google了一下，发现是这样的：在启动一个application的时候，为了尽快地响应用户，`application`会先从`manifest`中读取相关属性，然后尽快展现一个预览界面给用户，这个界面的展现是可能先于activity的加载的，所以预览界面读取到manifest中有定义theme这个属性，且属性值并不是`@android:style/Theme.NoTitleBar`，默认就会加载显示app name的titlebar，等到activity加载的时候执行到了要自定义titlebar的代码，并且加载了自定义的titlebar，那么就会变成显示自定义的titlebar，所以会出现闪了一下默认的titlebar的情况

**解决办法：**我们可以将activity的theme属性设置为@android:style/Theme.NoTitleBar，告诉app 我不需要titlebar，那样就不会预加载带app name的titlebar了，但是我们自定义的标题栏就没法加载了，现在就需要在activity加载自定义的标题栏的时候让activity知道我还是要加载titlebar的，那么就需要加上这么一句代码：
&lt;pre&gt;`setTheme(R.style.HomePage);`&lt;/pre&gt;
还有一点我需要特别强调的是：如果没有加这句
&lt;pre&gt;`&amp;lt;item name=&quot;android:windowActionBar&quot;&amp;gt;false&amp;lt;/item&amp;gt;`&lt;/pre&gt;
那么`setTheme`方法要放到`super.onCreate(savedInstanceState);`之前的，否则会报错。
查看super.onCreate(savedInstanceState)的代码可以知道是和`actionbar`有关系的：
&lt;pre&gt;`protected void onCreate(Bundle savedInstanceState) {
    if (DEBUG_LIFECYCLE) 
        Slog.v(TAG, &quot;onCreate &quot; + this + &quot;: &quot; + savedInstanceState);
    if (mLastNonConfigurationInstances != null) {
        mAllLoaderManagers = mLastNonConfigurationInstances.loaders;
    }
    if (mActivityInfo.parentActivityName != null) {
        if (mActionBar == null) {
            mEnableDefaultActionBarUp = true;
        } else {
            mActionBar.setDefaultDisplayHomeAsUpEnabled(true);
        }
    }
 ...
}
</code></pre><p>哎，遇到的两个坑总算解决了，贴一张运行的效果图<br><a href="http://www.picksomething.cn/wp-content/uploads/2014/12/12.png" target="_blank" rel="noopener"><img src="http://www.picksomething.cn/wp-content/uploads/2014/12/12.png" alt="1"></a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/10/30/Linux下开机自动挂载samba目录，且可以正常读写/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/10/30/Linux下开机自动挂载samba目录，且可以正常读写/" itemprop="url">Linux下开机自动挂载samba目录，且可以正常读写</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-10-30T10:02:36+08:00">
                2014-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为现在基本都在Linux下活动了，工作中有需要用到编译服务器，每次进入linux之后再用mount命令手动挂载也挺麻烦的，而且手动挂载的话，每次都要重新将服务器目录的代码导入到source insight，麻烦极了，严重降低了生产效率。</p>
<p>那么问题就来了，如何能够开机自动挂载samba目录呢，google或者baidu一下你会发现各种各样的方法，大致可以分为两类，</p>
<p>一，将mount命令写入到脚本中，开机自动加载脚本</p>
<p>二，修改fstab</p>
<p>第一种方法我没有试过，我用的第二种方法，但是也遇到很多坑，写下来让需要的网友不用走那么多弯路。</p>
<p>首先我们知道挂载samba目录的mount命令是：</p>
<pre><code>mount -t cifs //172.20.4.189/home /mnt/myshare -o username=caobin
`&lt;/pre&gt;
-o代表后面可以跟很多参数，比如password啊，iocharset之类的，以`，`分割。
运行完该命令之后，如果有密码会提示让输入密码的，也可以直接将密码以password=xxx的形式放到-o后面。
&lt;!--more--&gt;
打开fstab，vim /etc/fstab 默认fstab是只读的，所以需要修改一下权限，在最后加入这么一句：
&lt;pre&gt;`//172.20.4.189/home /mnt/myspace cifs defaults,username=caobin,password=xxx 0 0
`&lt;/pre&gt;
然后保存退出，重启机器你发现确实挂载上了，开心的不得了

而且还可以将服务器上的android源码导入`source insight`了，但是你会发现普通用户你没办法修改，shit啊，怎么可能不修改代码呢，你们一看可能说我没加rw，那么我将上面那句改为这样
&lt;pre&gt;`//172.20.4.189/home /mnt/myspace cifs defaults,rw,username=caobin,password=xxx 0 0
`&lt;/pre&gt;
然后你试试，一样是不可以写的，哪有那么简单啊，或者说把defaults去掉，一样没用的。

那么如何解决呢，google了很多，有的说加`umask=000`，有的说把服务器上的uid和gid加上去，几乎都是抄来抄去的，我就一次次试，最终发现我在挂载的时候将uid和gid指定为本机的就行了，打开terminal，输入id，就看到uid和gid了。

最终我挂载成功，且可以正常读写的命令是这样的
&lt;pre&gt;`//172.20.4.189/home /mnt/myspace cifs defaults,rw,uid=1000,gid=1000,credentials=/etc/samba/credentials 0 0
</code></pre><p>那个<code>/ect/samba/credentials</code>是保存密码用的，嫌麻烦可以直接用<code>username=caobin,password=xxx</code>替换即可，如果中文乱码的话，可以加上<code>iocharset=utf8</code>。</p>
<p>就酱，over</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/10/11/博客搬家/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/10/11/博客搬家/" itemprop="url">博客搬家</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-10-11T14:28:49+08:00">
                2014-10-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Twitter/" itemprop="url" rel="index">
                    <span itemprop="name">Twitter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>将自己的博客从emlog搬到wordpress了，数据库导入真的是件复杂的事啊，头都大了。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.jpg"
                alt="picksomething" />
            
              <p class="site-author-name" itemprop="name">picksomething</p>
              <p class="site-description motion-element" itemprop="description">专注Android，Java，React Native，Python</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">60</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">126</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">picksomething</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
