<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="一路追梦想" type="application/atom+xml" />






<meta name="description" content="专注Android，Java，RN，Python">
<meta property="og:type" content="website">
<meta property="og:title" content="一路追梦想">
<meta property="og:url" content="http://picksomething.cn/page/4/index.html">
<meta property="og:site_name" content="一路追梦想">
<meta property="og:description" content="专注Android，Java，RN，Python">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一路追梦想">
<meta name="twitter:description" content="专注Android，Java，RN，Python">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://picksomething.cn/page/4/"/>





  <title>一路追梦想</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7f518f8b2b8ad8f8b149cdb51b19223f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一路追梦想</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">热爱技术，更热爱生活</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2015/01/27/Android开机设置默认Launcher/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/01/27/Android开机设置默认Launcher/" itemprop="url">Android开机设置默认Launcher</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-27T00:22:10+08:00">
                2015-01-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>讲到设置默认Launcher，必须先说说<code>Provision.apk</code>这个应用，这个是Android原生自带的应用，本文讲解设置默认Launcher就是通过<code>Provision.apk</code>这个应用来实现的。</p>
<p>首先我们知道Android启动HomeLauncher的最后一步是在<code>ActivityManagerService.java</code>中的<code>startHomeActivityLocked</code>方法中发送一个带有<code>android.intent.category.HOME</code><br>的intent来启动响应该属性的应用，一般Launcher的Manifest配置文件中都会有此属性，所以系统中的Launcher就是这样被启动了。关于Android启动Launcher的流程，找时间可以再写一篇文章分析，暂时介绍到这里。<br>接下来就要说Provision这个应用了，该应用的源码在<code>packages/apps/</code>下的Provision这个文件夹中，看一下该应用的目录结构：<br><a href="http://www.picksomething.cn/wp-content/uploads/2015/01/provision.jpg" target="_blank" rel="noopener"><img src="http://www.picksomething.cn/wp-content/uploads/2015/01/provision-300x94.jpg" alt="provision"></a><br>该应用只有一个java文件DefaultActivity.java，我们看一下该应用的配置文件<code>AndroidManifest.xml</code></p>
<pre><code>&amp;lt;!-- For miscellaneous settings --&amp;gt;
    &amp;lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot; /&amp;gt;
    &amp;lt;uses-permission android:name=&quot;android.permission.WRITE_SECURE_SETTINGS&quot; /&amp;gt;
&lt;!--more--&gt;
    &amp;lt;application&amp;gt;
        &amp;lt;activity android:name=&quot;DefaultActivity&quot;
                android:excludeFromRecents=&quot;true&quot;&amp;gt;
            &amp;lt;intent-filter android:priority=&quot;1&quot;&amp;gt;
                &amp;lt;action android:name=&quot;android.intent.action.MAIN&quot; /&amp;gt;
                &amp;lt;category android:name=&quot;android.intent.category.HOME&quot; /&amp;gt;
                &amp;lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&amp;gt;
            &amp;lt;/intent-filter&amp;gt;
        &amp;lt;/activity&amp;gt;
    &amp;lt;/application&amp;gt;`&lt;/pre&gt;
我们注意到其实Provision也会响应`android.intent.category.HOME`属性，并且从这句android:priority=1可以看出起优先级是比一般Launcher都要高的，所以在AMS的startHomeActivityLocked启动Launcher的时候会先启动Provision应用，然后才是启动HomeLauncher，那接着我们看看在Provision中都做了些什么，我们知道默认是启动DefaultActivity.java这个文件，看一下源码：
&lt;pre&gt;`/**
 * Application that sets the provisioned bit, like SetupWizard does.
 */
public class DefaultActivity extends Activity {

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        // Add a persistent setting to allow other apps to know the device has been provisioned.
        Settings.Global.putInt(getContentResolver(), Settings.Global.DEVICE_PROVISIONED, 1);
        Settings.Secure.putInt(getContentResolver(), Settings.Secure.USER_SETUP_COMPLETE, 1);

        // remove this activity from the package manager.
        PackageManager pm = getPackageManager();
        ComponentName name = new ComponentName(this, DefaultActivity.class);
        pm.setComponentEnabledSetting(name, PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                PackageManager.DONT_KILL_APP);
        // terminate the activity.
        finish();
    }
}`&lt;/pre&gt;
代码很简洁，首先是在Settings的`Global`表中将`DEVICE_PROVISIONED`属性设置为1(这一点还是相当重要的，因为很多地方都会检查该标志是否被置成1来决定是不是要走正常的流程)，在`Secure`表中将`USER_SETUP_COMPLETE`属性设置为1。其实获取一个PackageManager对象，通过该对象的`setComponentEnabledSetting`方法来吧自己给disable掉。看一下该方法的解释和说明：
&lt;pre&gt;`void setComponentEnabledSetting (ComponentName componentName, int newState, int flags)
componentName：组件名称 
newState：组件新的状态，可以设置三个值，分别是如下： 
　　不可用状态：COMPONENT_ENABLED_STATE_DISABLED 
　　可用状态：COMPONENT_ENABLED_STATE_ENABLED 
　　默认状态：COMPONENT_ENABLED_STATE_DEFAULT 
flags:行为标签，值可以是DONT_KILL_APP或者0。 0说明杀死包含该组件的app`&lt;/pre&gt;
流程很清楚，Provision将`DEVICE_PROVISIONED`标志设置成1之后，然后就将自己从PM中removed掉了，以后就不会再启动，除非系统被重置，或者data目录被删除。

接下来就是讲如何设置默认Launcher了，思路就是在Provision中设置好默认Launcher，Provision启动之后就直接启动默认Launcher了，就不会存在如果系统中有多个Launcher的时候，弹出让用户选择的情况了。

首先说一下我们公司的需要，我们智能电视默认带有三个Launcher，然后默认Launcher是放到system/etc下面的一个DefaultLauncher的配置文件中，第一次启动系统的时候就是根据改配置文件来决定默认Launcher的，首先看一下我们是怎么修改DefaultActivity.java文件的：
&lt;pre&gt;`public class DefaultActivity extends Activity {
    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        // Add a persistent setting to allow other apps to know the device has been provisioned.
        Settings.Global.putInt(getContentResolver(), Settings.Global.DEVICE_PROVISIONED, 1);
        Settings.Secure.putInt(getContentResolver(), Settings.Secure.USER_SETUP_COMPLETE, 1);

        // remove this activity from the package manager.
        PackageManager pm = getPackageManager();
        ComponentName name = new ComponentName(this, DefaultActivity.class);
        pm.setComponentEnabledSetting(name, PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                PackageManager.DONT_KILL_APP);
        setDefaultLauncher();
        // terminate the activity.
        finish();
    }

    private String getDefaultLauncherPkgName() {
        final String path = &quot;/system/etc/defaultlauncher.dat&quot;;
        System.out.println(&quot;in getDefaultLauncherPkgName&quot;);
        String PackageName = null;
        File f = new File(path);
        if (!f.exists()) {
            System.out.println(&quot;/system/etc/defaultlauncher.dat is not exit&quot;);
            return null;
        }
        if (f == null) {
            System.out.println(&quot;File f is null&quot;);
            return null;
        }
        try {
            FileReader r = new FileReader(f);
            BufferedReader br = new BufferedReader(r);
            String temp = null;
            try {
                while ((temp = br.readLine()) != null) {
                    if (temp.indexOf(&quot;defaultlauncher&quot;) != -1) {
                        Pattern p = Pattern.compile(&quot;\\s*|\t|\r|\n&quot;);
                        Matcher m = p.matcher(temp);
                        String dest = m.replaceAll(&quot;&quot;);
                        PackageName = (dest).substring((dest).indexOf(&quot;=&quot;) + 1);
                        break;
                    }
                }
                br.close();
                r.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        System.out.println(&quot;getDefaultLauncherPkgName PackageName = &quot; + PackageName);
        return PackageName;
    }

    private boolean setDefaultLauncher() {
        // get default component   
        System.out.println(&quot;Come in setDefaultLauncher&quot;);
        PackageManager pm = getPackageManager();
        ArrayList&lt;IntentFilter&gt; LauncherIntentList = new ArrayList&lt;IntentFilter&gt;();
        ArrayList&lt;ComponentName&gt; LauncherList = new ArrayList&lt;ComponentName&gt;();
        //clear the current preferred launcher
        ArrayList&lt;IntentFilter&gt; intentList = new ArrayList&lt;IntentFilter&gt;();
        ArrayList&lt;ComponentName&gt; cnList = new ArrayList&lt;ComponentName&gt;();
        pm.getPreferredActivities(intentList, cnList, null);
        IntentFilter dhIF;
        for (int i = 0; i &lt; cnList.size(); i++) {
            dhIF = intentList.get(i);
            if (dhIF.hasAction(Intent.ACTION_MAIN) &amp;&amp; dhIF.hasCategory(Intent.CATEGORY_HOME)) {
                LauncherIntentList.add(intentList.get(i));
                LauncherList.add(cnList.get(i));
            }
        }
        if (LauncherList.size() == 1) {
            System.out.println(&quot;Already have set default launcher&quot;);
            return true;
        }
        if (LauncherList.size() &gt; 1) {
            for (int i = 0; i &lt; LauncherList.size(); i++)
                pm.clearPackagePreferredActivities(LauncherList.get(i).getPackageName());
        }
        String defaultLauncherPkg = getDefaultLauncherPkgName();
        if (defaultLauncherPkg == null) {
            System.out.println(&quot;In ActivityManagerService setDefaultLauncher defaultLauncherPkg = null&quot;);
            return false;
        }
        // get all Launcher activities     
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        List&lt;ResolveInfo&gt; list = new ArrayList&lt;ResolveInfo&gt;();
        list = pm.queryIntentActivities(intent, 0);
        // get all components and the best match   
        IntentFilter filter = new IntentFilter();
        filter.addAction(Intent.ACTION_MAIN);
        filter.addCategory(Intent.CATEGORY_HOME);
        filter.addCategory(Intent.CATEGORY_DEFAULT);
        final int N = list.size();
        ComponentName[] set = new ComponentName[N];
        int bestMatch = IntentFilter.MATCH_CATEGORY_EMPTY;
        int defaultLauncherIndex = -1;
        for (int i = 0; i &lt; N; i++) {
            ResolveInfo r = list.get(i);
            set[i] = new ComponentName(r.activityInfo.packageName, r.activityInfo.name);
            if (defaultLauncherPkg.equals(r.activityInfo.packageName))
                defaultLauncherIndex = i;
            System.out.println(&quot;SetDefaultLauncher: &quot; + set[i].getPackageName() + &quot; &quot; + set[i].getClassName());
            //if (r.match &gt; bestMatch) bestMatch = r.match;  
        }
        // add the default launcher as the preferred launcher
        if (defaultLauncherIndex == -1) {
            return false;
        }
        ComponentName launcher = new ComponentName(set[defaultLauncherIndex].getPackageName(),
                set[defaultLauncherIndex].getClassName());
        pm.addPreferredActivity(filter, bestMatch, set, launcher);
        return true;
    }
}
`&lt;/pre&gt;
这里需要重点说明的就是这两个方法：
&lt;pre&gt;`//清除之前默认选择的Launcher
pm.clearPackagePreferredActivities(LauncherList.get(i).getPackageName());
//添加默认Launcher
pm.addPreferredActivity(filter, bestMatch, set, launcher);`&lt;/pre&gt;
PS：这两句能够执行成功的前提是必须在AndroidManifest.xml文件中加入权限：
&lt;pre&gt;`&amp;lt;!-- For miscellaneous settings --&amp;gt;
    &amp;lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot; /&amp;gt;
    &amp;lt;uses-permission android:name=&quot;android.permission.WRITE_SECURE_SETTINGS&quot; /&amp;gt;
    &amp;lt;!-- Konka Patch Start --&amp;gt;
    &amp;lt;uses-permission android:name=&quot;android.permission.SET_PREFERRED_APPLICATIONS&quot;/&amp;gt;
    &amp;lt;!-- Konka Patch End --&amp;gt;`&lt;/pre&gt;
这样系统开机就会进入默认设置的Launcher了，用户可以在我这基础上修改默认Launcher的设置方式，或者在Provision程序中设置一些需要在启动Launcher之前进行的设置等等。

网上还有其他一些设置默认Launcher的方式

&lt;pre&gt;`readPermissions();
String firstBoot = SystemProperties.get(&quot;persist.sys.preactivity&quot;); 
if (&quot;0&quot;.equals(firstBoot)) {
    addPreferredActivityForULauncher();
}
SystemProperties.set(&quot;persist.sys.preactivity&quot;, &quot;1&quot;);
mRestoredSettings = mSettings.readLPw();
private void addPreferredActivityForULauncher() {
    IntentFilter filter = new IntentFilter();
    filter.addAction(&quot;android.intent.action.MAIN&quot;);
    filter.addCategory(&quot;android.intent.category.HOME&quot;); 
    filter.addCategory(&quot;android.intent.category.DEFAULT&quot;);
    ComponentName preActivity = new ComponentName(&quot;com.android.ulauncher&quot;
        ,&quot;com.android.ulauncher.Launcher&quot;); 
    ComponentName[] set = new ComponentName[] {
        new ComponentName(&quot;com.android.launcher&quot;, 
           &quot;com.android.launcher2.Launcher&quot;),preActivity
    }; 
    mSettings.mPreferredActivities.addFilter(
            new PreferredActivity(filter,
                IntentFilter.MATCH_CATEGORY_EMPTY, set, preActivity));
    scheduleWriteSettingsLocked();
}
</code></pre><ol>
<li>在startHomeActivityLocked方法中加入setDefaultLauncher方法<br>感兴趣的大家可以继续研究，亲身经历才会有大的收获。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2015/01/18/谈谈Android管理任务栈的方式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/01/18/谈谈Android管理任务栈的方式/" itemprop="url">谈谈Android管理任务栈的方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-18T02:03:43+08:00">
                2015-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>之前在研究Android 四种LaunchMode的时候，有看到关于taskAffinity的内容，当时没有细看，现在突然发现同事提交代码的时候有写关于修改taskAffinity的东西，于是就有抽时间详细的研究了一下taskAffinity这个属性，发现还蛮复杂的，把自己的一些实践和见解写下来，供以后查看，涉及到的内容较多，可以重点查看红色的字体。</p>
<p>学习技术最好的途径就是Google官方文档加代码实践，在开始说taskAffinity属性之前，我们可以先看一下官网对于Task的定义：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A task is a collection of activities that users interact with when performing a certain job. The activities are arranged in a stack (the back stack), in the order in which each activity is opened.</span><br></pre></td></tr></table></figure></p>
<p>简单来说就是:task就是一组特定的activities集合，这些activities按照每一个被打开的顺序放到一个stack中。<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2015/01/18/谈谈Android管理任务栈的方式/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2015/01/01/DrawerLayout导航抽屉的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/01/01/DrawerLayout导航抽屉的使用/" itemprop="url">DrawerLayout导航抽屉的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-01T15:41:28+08:00">
                2015-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>现在很多移动APP都支持那种左划或者右划调出抽屉选项的操作，目前第三方库比较知名的是配合<code>ActionBarShelock</code>(<a href="https://github.com/JakeWharton/ActionBarSherlock" target="_blank" rel="noopener">Github地址</a>,<a href="http://actionbarsherlock.com/" target="_blank" rel="noopener">官网地址</a>)使用的<code>SlidingMenu</code>(<a href="https://github.com/jfeinstein10/SlidingMenu" target="_blank" rel="noopener">Github地址</a>),这个开源库很强大,也有很多APP都在使用,经过测试和验证过的，大家都可以放心使用.</p>
<p>今天要说的是google官方出的DrawerLayout控件的使用，先看两张效果图：<br><a href="http://www.picksomething.cn/wp-content/uploads/2015/01/demo.png" target="_blank" rel="noopener"><img src="http://www.picksomething.cn/wp-content/uploads/2015/01/demo.png" alt=""></a></p>
<p>根据Google官方文档可以知道，使用DrawerLayout控件一般需要5大步：</p>
<ol>
<li><p>创建一个DrawerLayout布局<br>这个比较简单，要求DrawerLayout为根布局，第一个子布局代表没有打开抽屉时候的主视图(这个视图的宽度必须为match_parent)，第二个子布局就代表抽屉布局了，一般抽屉中放入的都是一些设置选项，以ListView为常见布局.代码如下：</p>
<p>&lt;android.support.v4.widget.DrawerLayout</p>
<pre><code>xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:id=&quot;@+id/drawer_layout&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot;&amp;gt;
&amp;lt;!-- 主视图布局，必须是DrawerLayout的第一个子布局，且宽度要充满父级容器 --&amp;gt;
</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2015/01/01/DrawerLayout导航抽屉的使用/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/30/Android Studio ADB not responding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/30/Android Studio ADB not responding/" itemprop="url">Android Studio ADB not responding</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-30T01:15:41+08:00">
                2014-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>今天想把一个Android Eclipse项目导出到Android Studio中之后,就Google了一下教程,整个导出过程也挺顺利,但是后面还是遇到了一个棘手的问题,我调试用的虚拟机是Genymotion,之前eclipse 和studio都是公用这一个Genymotion虚拟机调试,但是这次在运行从Eclipse导出到Studio的项目的时候,一直提示:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADB not responding. If you\'d like to retry</span><br><span class="line">then please manually kill "adb" and click \'Restart\'</span><br></pre></td></tr></table></figure>
<p>刚开始我以为是刚导出的原因,是不是之前Eclipse的adb连着这个Genymotion虚拟机,导致出现这样的错误,于是我就开始尝试:</p>
<ul>
<li>关闭Genymotion虚拟机,重新在Studio中通过Genymotion的插件启动Genymotion虚拟机,结果是:Not work</li>
<li>重启电脑,依然Not work</li>
</ul>
<p>我试着Google了一下,发现好像蛮多人遇到这个问题,但是要么就是别人在Stack Overflow提问没人回答,要么就是有人给出答案,无非就是说因为电脑里面有两个sdk目录(一个eclipse的sdk,一个studio的sdk),需要重启一下adb服务,也就是执行下面这两行代码:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb kill-server</span><br><span class="line">adb start-server</span><br></pre></td></tr></table></figure></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/12/30/Android Studio ADB not responding/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/29/2014年总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/29/2014年总结/" itemprop="url">2014年总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-29T00:47:15+08:00">
                2014-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Twitter/" itemprop="url" rel="index">
                    <span itemprop="name">Twitter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>2014年就要过完了，是时候好好写个总结了，趁着最近这几天休假，好好梳理一下，在2014年底把总结写一下。</p>
<ul>
<li><p>工作<br>优点:今年六月在入司一年之后顺利转正,也如愿拿到优秀校招生.整体来说这一年工作上提升了很多,待人接物等都有长足进步.技术上对于Android系统层面和Linux脚本这两大方面的提升比较明显一些,毕竟工作接触技术方面太多,Android系统开发啊,Android应用开发,C++,Makefile等技术都有接触,但是工作主要还是偏向Android系统开发,所以Android系统层面上的东西了解的更多一些.<br>不足:因为工作职位的原因,对于Android应用的开发做的并不是很多,上半年没有转正的时候还会做一些Android应用项目,但是下半年新的一批校招大学生进入公司之后,Android应用开发就交给他们了,我就主要负责Android系统这一块了,其实自己内心里面还是更喜欢Android应用开发多一些,所以只能在平时没事的时候自己学习,编写一些Android应用的Demo来防止自己对于Android应用生疏了.</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/12/29/2014年总结/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/23/echo命令在bash和dash上的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/23/echo命令在bash和dash上的区别/" itemprop="url">echo命令在bash和dash上的区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-23T23:01:38+08:00">
                2014-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天自己在新服务器上编译的时候突然发现无法生成备份包了，同样的源代码在之前用的服务器上编译就很正常的可以生成备份包，于是觉得很好奇，为什么会这样呢？<br>根据错误信息提示发现，由于生成的一个ini配置文件每一行的前面出现了无法识别的-e，打开配置文件一看还真的是每行前面都多出来了一个-e，还以为是之前新服务器没有配置好造成的，把编译生成的ini文件删除之后，重新编译一遍发现新生成的ini文件一样还是每行前面都有一个-e，我就很纳闷了，然后我就看了一下MakeFile中生成这个配置文件的这一段代码，基本都是这样的</p>
<pre><code>output_config_file: BUILD_CFG:=${SAVE_FOLDER}/cfg_build.ini
output_config_file:
        @echo -e &quot;[CFG_BUILD]&quot; &amp;gt; ${BUILD_CFG}
        @echo -e &quot;BOARD = $(BOARD_ID)&quot; &amp;gt;&amp;gt; ${BUILD_CFG}
`&lt;/pre&gt;
上面这段代码的内容很简单啊，无非就是在生成的cfg_build.ini中输出一些需要的内容，为什么会在cfg_build.ini的每行前面多处一个-e，实在搞不明白之后就找负责服务器的同事问了一下，他说也不太清楚要问一下这个Makefile脚本的作者，于是又找到了Makefile脚本的作者，他告诉了我一句bash和dash的区别，自己也不太清楚，就Google了一下，慢慢地就搞清楚了，然后惊叹：哦，原来是这样的。
&lt;!--more--&gt;
这个是因为Ubuntu在从6.10开始，就将先前默认的`bash shell`更换成了`dash shell`，据说是因为`bash`更小巧，运行更快，还与POSIX标准相兼容，也就是将`/bin/sh`链接到了`/bin/dash`而不是`/bin/bash`。我们可以验证一下是不是这样的，首先在打开一个Ubuntu的Terminal，我们输入如下命令：
&lt;pre&gt;`ls -l /bin/sh`&lt;/pre&gt;
我们可以看到输出是这样的
&lt;pre&gt;`/bin/sh -&amp;gt; dash`&lt;/pre&gt;
这就证实了`Ubuntu`确是将`dash`作为默认的`/bin/sh`，这样一来什么都搞清楚了，因为`dash shell`中标准的echo不支持转义参数-e，也就是说-e是`bash shell`上`echo`带的一个可选参数，既然这样，那么解决办法就是将`Ubuntu`默认的`/bin/sh`改为`bash shell`只需要下面这样一条命令就可以了：
&lt;pre&gt;`sudo dpkg-reconfigure dash`&lt;/pre&gt;
然后在弹出的选项中选择否(No)，就搞定了，此时再次执行ls -l /bin/sh命令就发现已经指向/bin/bash了，重新编译代码，发现此时生成的`build_cfg.ini`文件中每行前面已经没有-e了，问题顺利解决了。

**补充一**：@echo是关闭命令在屏幕上回显的意思
我们知道shell脚本会依次执行脚本中的的每条命令，并且会在显示器上显示，如果你不想让它们显示，可以加一个“echo off”，当然，“echo off”也是命令，它本身也会显示，如果连这条也不显示，就在前面加个“@”。

**补充二**：echo 命令基本的功能是输出，通过选项和参数组合，是能够产生很多功能的，这里举两个例子
例子1.
&lt;pre&gt;`echo -e &quot;\n Project1: \n\n\tplan \n\twrite \n\ttest\n&quot; &amp;gt; project1`&lt;/pre&gt;
&lt;div id=&quot;crayon-549999236c74e297491827&quot; class=&quot;crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-mouseover&quot;&gt;&lt;/div&gt;
输出格式化内容到project1中
例子2.
&lt;pre&gt;`echo -e The gif files are *.gif
</code></pre><p><div id="crayon-549999236c756037362532" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"></div><br>输出当前目录下所有名字以.gif后缀的图片文件</p>
<p><strong>补充三</strong>：附上dash和bash的简单介绍<br>bash shell是几乎所有Linux发行版的默认shell。作为标准Unix shell——Bourne shell（沿用创建者的名字）的替代，bash shell由GNU工程开发。bash shell的名称就是针对这个Bourne shell的文字游戏，全称为“Bourne again shell”。 bash有很灵活和强大的编程接口，同时又有很友好的用户界面。功能包括命令补齐、通配符、命令历史记录、别名等。<br>dash shell是作为Debian Linux发行版的一部分开发的，主要出现在Ubuntu Linux发行版中。它是Bourne shell的精简版，支持的功能不像bash shell支持的那样多，这可能会给脚本编程带来一些问题。<br>dash shell的历史很有趣，它是ash shell的直系后代，而ash shell是Unix系统上原来的Bourne shell的简化版本。令人不解的是，实际上dash shell在许多基于Debian的Linux发行版中并不是默认的shell。由于bash shell在Linux中的流行，大多数基于Debian的Linux发行版将bash shell用作普通登录shell，只将dash shell用作安装脚本的快速启动shell来安装发行版文件。而流行的Ubuntu发行版是一个例外。Ubuntu Linux发行版将bash shell用作默认的交互shell，但将dash shell用作默认的/bin/sh shell。这通常会让shell脚本程序员很困惑，并给在Linux环境中运行shell脚本带来了很多问题。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/12/14/OpenSuSE13.2添加Android Studio到应用程序列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/14/OpenSuSE13.2添加Android Studio到应用程序列表/" itemprop="url">OpenSuSE13.2添加Android Studio到应用程序列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-14T22:42:25+08:00">
                2014-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>现在<code>Android Studio 1.0</code>版本正式发布以后，感觉体验比以前好了很多，所以也可以正式抛弃Eclipse，彻底改用Android Studio了。<br>Linux下安装Android Studio很简单，就是到官网下载安装包，然后解压就可以了，然后到对应的Android Studio解压目录找到bin文件夹下面的studio.sh脚本，在终端中执行<code>./studio.sh</code>就可以启动了(前提是安装并配置好了JDK环境)<br>但是每次都在终端下到指定目录运行脚本启动也挺麻烦的，所以就要加入到应用程序列表中，可以直接搜索或者添加OpenSuSE左边的收藏栏中，如何将Android Studio添加到应用程序列表呢，很简单：</p>
<ol>
<li><p>到/usr/share/applications/目录下面</p>
</li>
<li><p>执行vim studio.desktop命令</p>
</li>
<li><p>加入如下代码</p>
<p>[Desktop Entry]<br>Categories=Application;Development<br>Name=Studio<br>Exec=/home/caobin/android-studio/bin/studio.sh<br>Icon=/home/caobin/android-studio/bin/idea.png<br>Terminal=false<br>Encoding=UTF-8<br>Comment=Android Studio<br>上面代码中Exec和Icon代表执行文件路径和图标路径，具体替换为自己实际的路径即可</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/12/14/OpenSuSE13.2添加Android Studio到应用程序列表/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/11/29/又大了一岁/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/29/又大了一岁/" itemprop="url">又大了一岁</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-29T23:16:02+08:00">
                2014-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Twitter/" itemprop="url" rel="index">
                    <span itemprop="name">Twitter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div><br>&gt; 今年因为闰九月的缘故，自己的23岁生日好像晚来了一些，哈哈。今天生日,女朋友给送了一个机械键盘,感觉就是不一样,感谢.<br>&gt;<br>&gt;<br>&gt; 话说转眼都23周岁了,工作一年多了,很热爱编程这份工作,明年是关键的一年,加油.<br></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/11/02/Android4.0以上版本自定义Titlebar遇到的坑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/02/Android4.0以上版本自定义Titlebar遇到的坑/" itemprop="url">Android4.0以上版本自定义Titlebar遇到的坑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-02T22:34:34+08:00">
                2014-11-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>虽然Android原生的控件是越来越完善和强大，但是很多时候还是需要我们自定义一些控件来让我们开发的app看起来很好看，让人舒服，比如<code>android4.0</code>以上默认的edittext我就觉得不好看，没有边角，还是喜欢那种四周有边角的看起来让人舒服，当然这个不同主题下显示效果是不一样的。题外话就扯到这里吧，现在进入正题：</p>
<p><code>Titlebar</code>就是Activity最上面显示app name的那个东东，今天在coding的时候遇到一个需要自定义titlebar的，当然这个很简单了，就是自己根据需要写一个布局然后替换掉默认的titlebar就可以了，替换代码baidu一下有很多，简单的说就是在activity的onCreate方法中加入下面两句：</p>
<ol>
<li><p>告诉activity我要使用自己定义的titlebar，不用你默认的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);</span><br></pre></td></tr></table></figure>
</li>
<li><p>让activity加载自己定义的titlebar的布局</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>然后在<code>manifest</code>中自定义titlebar的那个activity中加入自定义的theme，贴上我自定义theme的代码，我使用的是4.4的版本<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"HomePage"</span> <span class="attr">parent</span>=<span class="string">"AppTheme"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowTitleSize"</span>&gt;</span>60dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowTitleBackgroundStyle"</span>&gt;</span>@style/WindowTitleBackground<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"WindowTitleBackground"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:background"</span>&gt;</span>@color/blue<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="第一个坑，报如下错误："><a href="#第一个坑，报如下错误：" class="headerlink" title="第一个坑，报如下错误："></a>第一个坑，报如下错误：</h3>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/11/02/Android4.0以上版本自定义Titlebar遇到的坑/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://picksomething.cn/2014/10/30/Linux下开机自动挂载samba目录，且可以正常读写/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="picksomething">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一路追梦想">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/10/30/Linux下开机自动挂载samba目录，且可以正常读写/" itemprop="url">Linux下开机自动挂载samba目录，且可以正常读写</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-10-30T10:02:36+08:00">
                2014-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为现在基本都在Linux下活动了，工作中有需要用到编译服务器，每次进入linux之后再用mount命令手动挂载也挺麻烦的，而且手动挂载的话，每次都要重新将服务器目录的代码导入到source insight，麻烦极了，严重降低了生产效率。</p>
<p>那么问题就来了，如何能够开机自动挂载samba目录呢，google或者baidu一下你会发现各种各样的方法，大致可以分为两类，</p>
<p>一，将mount命令写入到脚本中，开机自动加载脚本</p>
<p>二，修改fstab</p>
<p>第一种方法我没有试过，我用的第二种方法，但是也遇到很多坑，写下来让需要的网友不用走那么多弯路。</p>
<p>首先我们知道挂载samba目录的mount命令是：</p>
<pre><code>mount -t cifs //172.20.4.189/home /mnt/myshare -o username=caobin
`&lt;/pre&gt;
-o代表后面可以跟很多参数，比如password啊，iocharset之类的，以`，`分割。
运行完该命令之后，如果有密码会提示让输入密码的，也可以直接将密码以password=xxx的形式放到-o后面。
&lt;!--more--&gt;
打开fstab，vim /etc/fstab 默认fstab是只读的，所以需要修改一下权限，在最后加入这么一句：
&lt;pre&gt;`//172.20.4.189/home /mnt/myspace cifs defaults,username=caobin,password=xxx 0 0
`&lt;/pre&gt;
然后保存退出，重启机器你发现确实挂载上了，开心的不得了

而且还可以将服务器上的android源码导入`source insight`了，但是你会发现普通用户你没办法修改，shit啊，怎么可能不修改代码呢，你们一看可能说我没加rw，那么我将上面那句改为这样
&lt;pre&gt;`//172.20.4.189/home /mnt/myspace cifs defaults,rw,username=caobin,password=xxx 0 0
`&lt;/pre&gt;
然后你试试，一样是不可以写的，哪有那么简单啊，或者说把defaults去掉，一样没用的。

那么如何解决呢，google了很多，有的说加`umask=000`，有的说把服务器上的uid和gid加上去，几乎都是抄来抄去的，我就一次次试，最终发现我在挂载的时候将uid和gid指定为本机的就行了，打开terminal，输入id，就看到uid和gid了。

最终我挂载成功，且可以正常读写的命令是这样的
&lt;pre&gt;`//172.20.4.189/home /mnt/myspace cifs defaults,rw,uid=1000,gid=1000,credentials=/etc/samba/credentials 0 0
</code></pre><p>那个<code>/ect/samba/credentials</code>是保存密码用的，嫌麻烦可以直接用<code>username=caobin,password=xxx</code>替换即可，如果中文乱码的话，可以加上<code>iocharset=utf8</code>。</p>
<p>就酱，over</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/favicon.jpg"
                alt="picksomething" />
            
              <p class="site-author-name" itemprop="name">picksomething</p>
              <p class="site-description motion-element" itemprop="description">专注Android，Java，RN，Python</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">130</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">PICKSOMETHING</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
